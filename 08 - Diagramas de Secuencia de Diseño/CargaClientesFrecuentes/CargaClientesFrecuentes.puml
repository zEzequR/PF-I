@startuml
title Carga de Clientes Frecuentes (Alta)

hide footbox

actor "Administrador:Admin" as admin
participant "gc:gestionControlador" as ctrl
participant "cat:<<Singleton>>\nCatalogoClientes" as cat
participant "clienteActual:Cliente" as cliente_actual

admin -> ctrl : nuevoClienteFrecuente(dni, nombre, mail, numTel, saldo)
activate ctrl

ctrl -> cat : buscarCliente(dni)
activate cat

loop [para cada c en clientes]
    cat -> cliente_actual : getDni()
    activate cliente_actual
    cliente_actual --> cat : << dniActual : String >>
    deactivate cliente_actual
    
    alt dni == dniActual
        cat --> ctrl : << c : Cliente >>
        deactivate cat
        
        ctrl --> admin : << "Error: Cliente ya registrado" >>

    else dni != dniActual

        deactivate cat

        
        create participant "nuevoCF:ClienteFrecuente" as nuevo_cf
        ctrl -> nuevo_cf : create(dni, nombre, mail, numTel, saldo)
        activate nuevo_cf
        nuevo_cf --> ctrl : << nuevoCF : ClienteFrecuente >>
        deactivate nuevo_cf

        ctrl -> cat : agregarCliente(nuevoCF)
        activate cat
        
        cat --> ctrl : << null >>
        deactivate cat
        
        ctrl --> admin : << "Cliente registrado como frecuente" >>
        
    end
end

deactivate ctrl
@enduml