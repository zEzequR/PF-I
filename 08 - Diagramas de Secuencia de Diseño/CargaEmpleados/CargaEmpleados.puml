@startuml
title Carga de Nuevos Empleados (Alta)

hide footbox

actor "Administrador:Admin" as admin
participant "cu:controladorUsuario" as ctrl
participant "cat:<<Singleton>>\nCatalogoUsuarios" as cat
participant "usuActual:Usuario" as usu_actual
participant "nuevoUsu:Usuario" as nuevo_usu

admin -> ctrl : nuevoEmpleado(nombreUsuario, contraseña, tipoUsuario)
activate ctrl

ctrl -> cat : buscarUsuario(nombreUsuario)
activate cat

loop [para cada u en usuarios]
    cat -> usu_actual : getNombreUsuario()
    activate usu_actual
    usu_actual --> cat : << nombreActual : String >>
    deactivate usu_actual
    
    alt nombreUsuario == nombreActual
        cat --> ctrl : << u : Usuario >>
        deactivate cat
        
        ctrl --> admin : << "Error: Empleado ya registrado" >>

    else nombreUsuario != nombreActual

        deactivate cat
        
        ctrl -> nuevo_usu : crearNuevoUsuario(nombreUsuario, contraseña, tipoUsuario)
        activate nuevo_usu
        nuevo_usu --> ctrl : << nuevoUsu : Usuario >>
        deactivate nuevo_usu

        ctrl -> cat : agregarUsuario(nuevoUsu)
        activate cat
        
        cat --> ctrl : << null >>
        deactivate cat
        
        ctrl --> admin : << "Éxito: Empleado registrado" >>
        
    end
end

deactivate ctrl
@enduml