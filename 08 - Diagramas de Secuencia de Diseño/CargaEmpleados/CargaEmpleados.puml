@startuml
title Secuencia: Carga Empleados (Validación Correcta)

hide footbox

actor "Administrador:Admin" as admin
participant "Interfaz: NegCtrl" as NegCtrl

participant "List<Usuario>: objListaUsuarios" as listaUser
participant "Usuario: objUsuario" as user
participant "Usuario: nuevoUsuario" as newUser

participant "List<Empleado>: objListaEmpleados" as listaEmp
participant "Empleado: objEmpleado" as emp
participant "Empleado: nuevoEmpleado" as newEmp


admin -> NegCtrl : registrarNuevoEmpleado(nombreUsuario: String, contrasenia: String, tipo: TipoUsuario, legajo: String, sueldo: Float)
activate NegCtrl

    alt datos incompletos o formato inválido
        NegCtrl --> admin : <<NULL>>
    else datos válidos
    
        NegCtrl -> listaUser : buscarUsuario(nombreUsuario: String)
        activate listaUser
        
        loop [para cada u en objListaUsuarios]
            listaUser -> user : getNombreUsuario()
            activate user
            user --> listaUser : << nombreActual : String >>
            deactivate user
            
            alt nombreUsuario == nombreActual
                listaUser --> NegCtrl : << objUsuarioEncontrado : Usuario >>
            end
        end
        deactivate listaUser

        NegCtrl -> listaEmp : buscarEmpleado(legajo: String)
        activate listaEmp
        
        loop [para cada emp en objListaEmpleados]
            listaEmp -> emp : getLegajo()
            activate emp
            emp --> listaEmp : << legajoActual : String >>
            deactivate emp
            
            alt legajo == legajoActual
                listaEmp --> NegCtrl : << objEmpleadoEncontrado : Empleado >>
            end
        end
        deactivate listaEmp

        alt (objUsuarioEncontrado != null) || (objEmpleadoEncontrado != null)
            
            NegCtrl --> admin : <<NULL>>
            
        else (ninguno existe)
            
            NegCtrl -> newUser ** : crearUsuario(nombreUsuario: String, contrasenia: String, tipo: TipoUsuario)
            activate newUser
            newUser --> NegCtrl : << nuevoUsuario : Usuario >>
            deactivate newUser

            NegCtrl -> newEmp ** : crearEmpleado(legajo: String, sueldo: Float)
            activate newEmp
            newEmp --> NegCtrl : << nuevoEmpleado : Empleado >>
            deactivate newEmp

            NegCtrl -> newEmp : setUsuario(nuevoUsuario: Usuario)
            activate newEmp
            newEmp --> NegCtrl : <<NULL>>
            deactivate newEmp

            NegCtrl -> listaUser : agregarUsuario(nuevoUsuario: Usuario)
            activate listaUser
            listaUser --> NegCtrl : << estado : Boolean >>
            deactivate listaUser

            NegCtrl -> listaEmp : agregarEmpleado(nuevoEmpleado: Empleado)
            activate listaEmp
            listaEmp --> NegCtrl : << estado : Boolean >>
            deactivate listaEmp

            NegCtrl --> admin : <<NULL>>
        end
        
    end

deactivate NegCtrl
@enduml