@startuml
title Carga de proveedores
hide footbox

actor "Administrador:Admin" as admin
participant "gc:GestionControlador" as ctrl
participant "cat:<<Singleton>>\nCatalogoDroguerias" as cat
participant "drogActual:Drogueria" as drog_actual

admin -> ctrl : registrarDrogueria(nombre: String, email: String, tel: String, dir: String, cuit: String, canalPreferido: String)
activate ctrl

ctrl -> cat : buscarProveedor(nombre)
activate cat

loop [para cada d en droguerias]
    cat -> drog_actual : getNombre()
    activate drog_actual
    drog_actual --> cat : << nombreActual : String >>
    deactivate drog_actual
    
    alt nombre == nombreActual
        cat --> ctrl : << d : Drogueria >>
        deactivate cat
        
        ctrl --> admin : << "Error: Droguería ya registrada" >>

    else nombre != nombreActual

        deactivate cat
    
        create participant "nuevaDrog:Drogueria" as nuevo_drog
        ctrl -> nuevo_drog : CrearDrogueria(nombre: String, email: String, tel: String, dir: String, cuit: String, canalPreferido: String)
        activate nuevo_drog
        nuevo_drog --> ctrl : << nuevaDrog : Drogueria >>
        deactivate nuevo_drog

        ctrl -> cat : agregarProveedor(nuevaDrog)
        activate cat
        
        cat --> ctrl : << null >>
        deactivate cat
        
        ctrl --> admin : << "Éxito: Droguería registrada" >>
        
    end
end

deactivate ctrl
@enduml